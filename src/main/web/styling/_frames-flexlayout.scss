/**
 * ResearchSpace
 * Copyright (C) 2015-2020, Â© Trustees of the British Museum
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

 //@import '~flexlayout-react/style/gray.css';

//$color_text: $color-dark;
//$color_background: $color-body-bg;
$color_base: white;
$color_1: scale_color($color_base, $lightness: -3%) !default;
$color_2: scale_color($color_base, $lightness: -10%) !default;
$color_3: scale_color($color_base, $lightness: -15%) !default;
$color_4: scale_color($color_base, $lightness: -20%) !default;
$color_5: scale_color($color_base, $lightness: -25%) !default;
$color_6: scale_color($color_base, $lightness: -30%) !default;

$font-size: 16px;

 @mixin absoluteFill {
  left: 0;
  top: 2px;
  right: 0;
  bottom: 0;
  position: absolute;
}

.flexlayout {

  &__layout {
      @include absoluteFill;
      overflow: hidden;
  }

  &__splitter {
     background-color: $color_2;

      @media (hover: hover) {
          &:hover {
            background-color: $color_4;
          }
      }
      &_border {
          z-index: 10;
      }

      &_drag {
          z-index: 1000;
          border-radius: 5px;
          background-color: $color_5;
      }
  }

  &__outline_rect {
      position: absolute;
      cursor: move;
      box-sizing: border-box;
      border: 2px solid $color-frame-drag;
      box-shadow: inset 0 0 60px rgba(0, 0, 0, 0.2);
      border-radius: 5px;
      z-index: 1000;

      &_edge {
          cursor: move;
          border: 2px solid green;
          box-shadow: inset 0 0 60px rgba(0, 0, 0, 0.2);
          border-radius: 5px;
          z-index: 1000;
          box-sizing: border-box;
      }
  }

  &__edge_rect {
      position: absolute;
      z-index: 1000;
      box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
      background-color: gray;
  }

  &__drag_rect {
      position: absolute;
      cursor: move;
      color: $color-dark;
      background-color: $color_1;
      border: 2px solid $color_4;
      box-shadow: inset 0 0 60px rgba(0, 0, 0, 0.3);
      border-radius: 5px;
      z-index: 1000;
      box-sizing: border-box;
      opacity: 0.9;
      text-align: center;

      display: flex;
      justify-content: center;
      flex-direction: column;
      overflow: hidden;
      padding: 10px;
      word-wrap: break-word;
      font-size: $font-size;
      font-weight: 600;
  }

  &__tabset {
      overflow: hidden;
      background-color: $color-frames-tabset-bg;
      box-sizing: border-box;
      font-size: $font-size;

      &_header {
          // tabset header bar
          position: absolute;
          display: flex;
          align-items: center;
          left: 0;
          right: 0;
          padding: 3px 3px 3px 5px;
          box-sizing: border-box;
          border-bottom: 1px solid $color_3;
          color: $color-dark;
          background-color: $color_1;
          box-shadow: inset 0 0 3px 0 rgba(136, 136, 136, 0.54);

          &_content {
              flex-grow: 1;
          }
      }

      &_tabbar {
          &_outer {
              // tabset tabbar outer
              box-sizing: border-box;
              background-color: $color-frames-tabset-bg;
              position: absolute;
              left: 0;
              right: 0;
              overflow: hidden;
              display: flex;
          }

          &_outer_top {
            opacity: 0.4;
            border-bottom: 1px solid $color_3;
          }

          &_outer_bottom {
              border-top: 1px solid $color_3;
          }

          &_inner {
              // tabset tabbar inner
              position: relative;
              box-sizing: border-box;
              display: flex;
              flex-grow: 1;
              overflow: hidden;

              &_tab_container {
                  display: flex;
                  box-sizing: border-box;
                  position: absolute;
                  top: 0;
                  bottom: 0;
                  width: 10000px;
                  padding: 0 10px;

                  &_top {
                      border-top: 2px solid transparent; // if you change this, update the _sizer above
                  }
                  &_bottom {
                      border-bottom: 2px solid transparent;
                  }
              }
          }
      }

      &-selected {
        opacity: 1;
      }

      &-maximized {
        background-image: linear-gradient($color_6, $color_2);
      }
  }

  &__tab {
      overflow: auto;
      position: absolute;
      box-sizing: border-box;
      color: $color-dark;
      background-color: $color-frames-tab-bg;

      &_button {
          display: inline-flex;
          align-items: center;
          box-sizing: border-box;
          padding: 3px 10px; // if you change top or bottom update the tabset_sizer above
          margin: 0px 2px;
          cursor: pointer;

          font-weight: 600;
          letter-spacing: .2px;

          color: $color-dark;

          &--selected {
              box-shadow: inset 0px -3px 0px 0px $color-dark;
          }

          &--unselected {
            color: $color-dark--op50;

            &:hover {
              box-shadow: inset 0px -3px 0px 0px $color-dark;
              color: $color-dark;
            }
          }

          &_top {
         //   box-shadow: inset -2px 2px 5px 0px rgba(0, 0, 0, .15);
         //   border-top-left-radius: 3px;
         //   border-top-right-radius: 3px;
          }

          &_bottom {
            box-shadow: inset -2px 0px 5px rgba(0, 0, 0, 0.1);
            border-bottom-left-radius: 3px;
            border-bottom-right-radius: 3px;
          }

          &_leading {
              display: inline-block;
          }

          &_content {
              display: inline-block;
          }

          &_textbox {
              border: none;
              color: green;
              background-color: $color_2;
          }

          &_textbox:focus {
              outline: none;
          }

          &_trailing {
              display: inline-block;
              margin-left: 8px;
              min-width: 8px;
              min-height: 8px;
          }
          @media (pointer: coarse) {
              &_trailing {
                  min-width: 20px;
                  min-height: 20px;
              }
          }
          @media (hover: hover) {
              &:hover &_trailing {
                  background: transparent url("/assets/images/icons/close.png") no-repeat center;
              }
          }

          &--selected &_trailing {
              background: transparent url("/assets/images/icons/close.png") no-repeat center;
          }

          &_overflow {
              margin: 0 6px;
              padding-right: 15px;
              border: none;
              color: $color-frame-button;
              font-size: inherit;
              background: transparent url(/assets/images/icons/more2.png) no-repeat right;
          }
      }

      &_toolbar {
          display: flex;
          align-items: center;
          padding: 0 20px;

          &_button {
              min-width: 25px;
              min-height: 25px;
              background-color: transparent;
              border: none;
              outline: none;

              display: flex;
              align-items: center;
              justify-content: center;

              padding: 0;
              color: $color-frame-button;

              &-min {
                  background: transparent url("/assets/images/icons/maximize.png") no-repeat center;
              }

              &-max {
                  background: transparent url("/assets/images/icons/restore.png") no-repeat center;
              }

              &-float {
                  background: transparent url("/assets/images/icons/popout.png") no-repeat center;
              }

              .rs-icon,
              .iconmoon,
              .fa {
                color: inherit;
                font-size: 1.3em;
              }
          }
      }

      &_floating {
          overflow: auto;
          position: absolute;
          box-sizing: border-box;
          color: $color-dark;
          background-color: $color-frames-tab-bg;
          display: flex;
          justify-content: center;
          align-items: center;

          &_inner {
              overflow: auto;
              display: flex;
              flex-direction: column;
              justify-content: center;
              align-items: center;
          }

          &_inner div {
              margin-bottom: 5px;
              text-align: center;
          }

          &_inner div a {
              color: royalblue;
          }
      }
  }

  &__border {
      box-sizing: border-box;
      overflow: hidden;
      display: flex;
      font-size: $font-size;

      &_top {
          border-bottom: 1px solid $color_4;
          align-items: center;
      }

      &_bottom {
          border-top: 1px solid $color_4;
          align-items: center;
          background-image: linear-gradient(90deg,#ffffff52 0%, #ccccccba 100%);

          padding-right: 10px;
      }

      &_left {
          border-right: 1px solid $color_4;
          align-content: center;
          flex-direction: column;
          background-image: linear-gradient(#ffffff52,#ccccccba);

          padding-bottom: 7px;
      }

      &_right {
          border-left: 1px solid $color_4;
          align-content: center;
          flex-direction: column;
          background-image: linear-gradient(#ffffff52, #ccccccba);

          padding-bottom: 7px;
      }

      &_inner {
          position: relative;
          box-sizing: border-box;
          display: flex;
          overflow: hidden;
          flex-grow: 1;

          &_tab_container {
              white-space: nowrap;
              display: flex;
              box-sizing: border-box;
              position: absolute;
              top: 0;
              bottom: 0;
              width: 10000px;

              padding: 3px;

              &_right {
                  transform-origin: top left;
                  transform: rotate(90deg);
              }
              &_left {
                  flex-direction: row-reverse;
                  transform-origin: top right;
                  transform: rotate(-90deg);
              }
          }
      }

      &_button {
          display: flex;
          align-items: center;
          cursor: pointer;
          padding: 3px 10px;
          margin: 2px;
          box-sizing: border-box;
          white-space: nowrap;
          box-shadow: inset 0 0 5px rgba(0, 0, 0, .25);
          border-radius: 2px;

          font-weight: 600;
          letter-spacing: .2px;

          &--selected {
            background-color: $color-dark;
            color: #ffffff;
          }

          &--unselected {
             color: $color-frame-button;

             &:hover {
                box-shadow: inset 0 0 5px rgba(0, 0, 0, .35);
              }
          }

          &_leading {
              display: inline;
          }

          &_content {
              display: inline-block;
          }

          &_trailing {
              display: inline-block;
              margin-left: 8px;
              min-width: 8px;
              min-height: 8px;
          }

          @media (pointer: coarse) {
              &_trailing {
                  min-width: 20px;
                  min-height: 20px;
              }
          }

          @media (hover: hover) {
              &:hover &_trailing {
                  background: transparent url("/assets/images/icons/close.png") no-repeat center;
              }
          }

          &--selected &_trailing {
              background: transparent url("/assets/images/icons/close.png") no-repeat center;
          }
      }

      &_toolbar {
          display: flex;
          align-items: center;

          &_left {
              flex-direction: column;
          }

          &_right {
              flex-direction: column;
          }

          &_button {
              min-width: 20px;
              min-height: 20px;
              border: none;
              outline: none;

              &-float {
                background: transparent url("/assets/images/icons/popout.png") no-repeat center;
              }

              &_overflow {
                  border: none;
                  padding-left: 12px;
                  color: $color-frame-button;
                  font-size: inherit;
                  background: transparent url("/assets/images/icons/more2.png") no-repeat left;
              }

              &_overflow_top,
              &_overflow_bottom {
                  margin-left: 10px;
              }

              &_overflow_right,
              &_overflow_left {
                  padding-right: 0px;
                  margin-top: 5px;
              }
          }
      }
  }

  &__popup_menu {
      font-size: 15px;
      letter-spacing: .1px;

      &_item {
          padding: 4px 10px;
          white-space: nowrap;
          cursor: pointer;
      }

      @media (hover: hover) {
          &_item:hover {
              background-color: $color_1;
          }
      }

      &_container {

          border: 1px solid $color-dark--op20;
          color: $color-frame-button;
          background: $color-body-bg;
          border-radius: 3px;
          position: absolute;
          z-index: 1000;
          max-height: 50%;
          min-width: 100px;
          overflow: auto;

          padding: 5px 0;
          top: 43px !important;
          text-transform: capitalize;
      }
  }

  &__floating_window {
      _body {
          height: 100%;
      }

      &_content {
          @include absoluteFill;
      }

      &_tab {
          overflow: auto;
          @include absoluteFill;

          box-sizing: border-box;
          background-color: $color-body-bg;
          color: $color-dark;
      }
  }

  &__error_boundary_container {
      @include absoluteFill;
      display: flex;
      justify-content: center;
  }
  &__error_boundary_content {
      display: flex;
      align-items: center;
  }

  // These classes are used to measure the sizes for tab header bar, tab bar and border bars,
  // only the height is used, the padding should match the vertical spacing (padding & margins)
  // that have been used in the above classes

  &__tabset_sizer {
      padding-top: 5px; // tab_button has 3 padding top, tabset header inner has 2 border
      padding-bottom: 3px; // tab_button has 3 padding bottom
      font-size: $font-size;
  }

  &__tabset_header_sizer {
      padding-top: 3px;
      padding-bottom: 3px;
      font-size: $font-size;
  }

  &__border_sizer {
      padding-top: 6px;
      padding-bottom: 5px;
      font-size: $font-size;
  }
}
 
