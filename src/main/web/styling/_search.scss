/**
 * ResearchSpace
 * Copyright (C) 2015-2020, Â© Trustees of the British Museum
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

/* Searching page */
.rs-search-page {
  flex: 1 1 0px; 
  overflow: hidden;
  height: 100%;

  #template-content {
    display: flex;
  }

  #semantic-search-tabs {
    display: flex;
    flex: 1;
    height: 100%;

    & > .nav.nav-tabs {

      border-bottom: none;
      border-right: 1px solid $color-border;
      width: 120px;
      height: 100%;
  
      & > li {
        padding: 1em;
        width: 100%;
  
        &.active,
        &.active:hover {
          box-shadow: inset -3px 0px 0px 0px $color-dark;
        }
  
        &:hover {
          box-shadow: inset -3px 0px 0px 0px $color-light;
        }
      }
    }

    .tab-content {

      height: 100%;
      padding: 8px;
      display: flex;
      flex-direction: column;
      flex: 1;

      .tab-pane {
        padding: 0;
        flex: 1;
        height: inherit;

        & > div {
          height: inherit;
          display: flex;
          flex-direction: column;
        }
      }
    }
  }

  #semantic-search-pane-text-search,
  #semantic-search-pane-structured-search {
    
    display: grid;
    grid-template-columns: minmax(2px, .1fr) 2fr minmax(2px, .1fr);
    grid-template-rows: fit-content(50px) auto;
    grid-template-areas: '. searchContent .';

    padding-right: 15px;
    
      & > div {
        grid-area: searchContent;
      }
  }

  #semantic-search-text-input {

    background-image: url(/assets/images/icons/search.svg);
    background-repeat: no-repeat;
    background-size: 15px 15px;
    background-position: right 8px center;
  }

  .rs-results-area {
    display: grid;
    grid-template-columns: 3fr min-content;
    grid-template-rows: 100%;
    grid-template-areas: 'results facet';
    height: 100%;

    flex: 1;

    .semantic-facet-holder {
      grid-area: facet;
      height: 100%;
      border-left: 1px solid $color-border;

      .show-facet-button {

        background-color: transparent;
        margin: 0;
        display: flex;
        height: 100%;

        .show-facet-button__label {
          transform: rotate(90deg);
          -webkit-transform: rotate(90deg);
          -moz-transform: rotate(90deg);
          -ms-transform: rotate(90deg);
          -o-transform: rotate(90deg);
          transform-origin: 11px 14px;
          -webkit-transform-origin: 11px 14px;
        }
      }

      .facet {
        height: inherit;
        display: flex;
        flex-direction: column;

        .facet-relations {

          height: inherit;
          overflow-y: auto;
          padding-right: 4px;
        }
      }
    }

    .semantic-search-results-container {
      grid-area: results;

      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .semantic-search-keywordAndActions {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 5px;
      padding: 0 10px;

      .form-group {
        height: auto;
        margin: 0;
        flex: 1;
        min-width: 150px;
        margin-right: 10px;
      }
    }

    .semantic-search-results-actions {
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-end;
      gap: 5px;
    }

    #search-results {

      flex: 1;
      display: flex;
      flex-direction: column;
      height: 100%;
      overflow: hidden;

      padding-top: 15px;

      .semantic-search-results {

        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-wrap: wrap;

        padding: 0 10px;
  
        .nav.nav-tabs {
          border: none;
        }
  
        .nav.nav-tabs > li {
          padding: 5px 10px;
          display: flex;
          align-items: center;
          justify-content: center;
          flex-wrap: wrap;
          border-radius: $border-radius;

          & > a {
            margin: 0;
          }
  
          &.active {
            box-shadow: none;
            background-color: $color-light;
          }
  
          &:hover {
            box-shadow: none;
          }
        }
      }

      .tab-content {
        flex: 1;
        overflow-y: auto;
        padding: 10px;

      }
    }

    .num-results-color {
      font-weight: bold;
      font-size: 16px;
      padding-left: 3px;
      padding-right: 3px;
      color: $color-info;
    }
  
  }

  /* #search-results {
    .search-tab-grid {
      .btn-default {
        border: none;
        padding: 5px 0;
        margin-left: -8px;
      }

      .dropdown-menu {
        font-size: 13px;
        left: -11px;
      }

      .griddle-custom-row {
        padding-top: 10px;
      }
    }
  } */
}

/* Card in Searching results as Grid */
/* #search-results .rs-grid-element {

  color: $color-dark;
  font-size: 14px;
  line-height: 1.2;

  box-shadow: 0 2px 2px 0px rgba(0, 0, 0, 0.1), 0 2px 10px 0 rgba(0, 0, 0, 0.09);

  &:hover {
    box-shadow: 1px 2px 8px 0px rgb(139, 132, 158), 1px 3px 12px 2px rgba(0, 0, 0, 0.07);
  }

  &.panel {
    border-radius: 6px;

    border: 0.5px solid $color-light;
  }

  &.panel-default {
    border-color: $color-light;
  }

  & .panel-body {
    display: initial !important; //to overwrite Core css
    padding: 0px !important;

    & .rs-card-img {
      height: 144px;
    }

    & img {
      border-top-left-radius: 6px;
      border-top-right-radius: 6px;
      border-top: 4px solid $color-white;
    }
  }

  & .panel-footer {
    padding: 9px 14px;
    background-color: #e1dee95e;
    border-top: 1px solid #e1dee9c7;
    border-bottom-left-radius: 6px;
    border-bottom-right-radius: 6px;

    .resource-card--icon {
      width: auto;
      margin-top: 0px;
      margin-left: 0px;
      opacity: 1 !important;
    }

    .resource-card--icon img {
      width: 13px !important;
      margin-top: 0px;
      display: block;
      -moz-box-sizing: border-box;
      box-sizing: border-box;
      padding-right: 0px !important;
      margin-right: 5px;
    }

    .rs-card-footer--text {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 77px !important;
    }

    .set-management__item-actions {
      margin-left: 0px !important;
    }

    .dropdown-menu.dropdown-menu-right {
      right: -32px !important;
      top: 26px !important;
    }

    .btn-link {
      color: $color-dark;
    }
  }

  & .dropdown-menu {
    top: 120%;
    right: -5px;
    left: unset;

    & > li > a {

      font-size: 14px;
      line-height: 1.2;
      padding: 5px 12px;

      &:hover,
      &:focus {
        background-color: #e1dee95e;
        color: $color-dark;
      }
    }
  }
} */

#search-results {

  //grid results card
  .rs-card-container:hover {
    border: 1px dashed $color-secondary;
    border-radius: 5px;
    cursor: grab;
  }

}

/* Search table results */
#search-results-pane-table {

  .table > tbody tr.standard-row:hover {
    outline: 1px dashed $color-secondary;
    outline-offset: -4px;
  }

  .table > tbody > tr > td {
    cursor: grab;
  }
}

#search-results {

  // for chart and timeline view
  .ComponentToolbar--actions {

    display: flex;
    align-items: center;
    margin-bottom: 1em;

    & > .btn-default {

      margin-left: 3px;
      padding: 8px 10px;
      font-size: 12px;
    }
  }
}
/* Chart results */
#search-results-pane-chart {

  padding-top: 2em;

  #mp-semantic-chart-tooltip .popover-content {
    
    .list-unstyled {
      margin-bottom: 0;
    }
  }
}

/* Timeline results */
#search-results-pane-timeline {

  .ComponentToolbar--actions {
    justify-content: flex-end;
  }
}

.search-results__alert.alert-warning {
  background-color: transparent;
  border: none;
  padding: 0;
  text-align: right;
  margin-bottom: 15px;
}

.search-results__actions button {
  margin-right: $padding-base-horizontal;
}

#semantic-search-tabs-pane-structured-search {

  .QueryBuilder--searchAreaHolder {
    padding: 1em 2em;
  }

  .ItemSelector--itemSelector {
    background-color: $color-white;
  }
}

.search-summary {
  letter-spacing: .2px;
  font-size: 15px;
}

/* .LazyTreeSelector--virtualizedList {
  padding: 20px 20px 10px 10px;
}

.LazyTreeSelector--item {
  display: flex;
  align-items: center;
  padding-top: 15px;
}

.LazyTreeSelector--itemCollapsed > input,
.LazyTreeSelector--itemExpanded > input {
  margin: 2px 0 0;
  zoom: 1.15;
}
 */