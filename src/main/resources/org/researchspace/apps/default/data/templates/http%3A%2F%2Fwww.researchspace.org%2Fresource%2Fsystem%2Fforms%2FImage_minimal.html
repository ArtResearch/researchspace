<semantic-form  [[> rsp:FormDefaults]] 
                persistence='{"type": "sparql", "targetInsertGraphIri": "{{#if scheme}}{{scheme}}{{else}}http://www.researchspace.org/assets/images{{/if}}"}'
                new-subject-template='{{#if scheme}}{{scheme}}/{{{{raw}}}}{{UUID}}{{{{/raw}}}}{{else}}/image/{{{{raw}}}}{{UUID}}{{{{/raw}}}}{{/if}}'
                fields='[[fieldDefinitions
                            classtype="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"
                            entity_formRecord="http://www.researchspace.org/pattern/system/entity/formRecord"
                            
                            entity_file_identifier="http://www.researchspace.org/pattern/system/entity/file_identifier"
                            entity_primary_appellation="http://www.researchspace.org/pattern/system/entity/primary_appellation"
                          ]]'
              >
              
    <div class="form-scroll-area nested-form">
        <semantic-form-hidden-input for='classtype' default-value='http://www.researchspace.org/ontology/EX_Digital_Image'> </semantic-form-hidden-input>
        <semantic-form-text-input for="entity_primary_appellation" label="Image name" placeholder="Enter image name"></semantic-form-text-input>
            
        <div style="margin-top: 5px;">
            <semantic-form-file-input   for='entity_file_identifier' 
                                        label='Image file'
                                        render-header='false'
                                        from-url-or-drop='true'
                                        accept-pattern='image/*' 
                                        storage='images'
                                        temp-storage='tmp'
                                        name-predicate-iri='http://www.researchspace.org/ontology/PX_has_file_name'
                                        media-type-predicate-iri='http://www.researchspace.org/ontology/PX_has_media_type'
                                        resource-query='PREFIX rs: <http://www.researchspace.org/ontology/>
                                                        CONSTRUCT {
                                                            ?__resourceIri__ a rs:EX_File.
                                                            ?__resourceIri__ rs:PX_has_file_name ?__fileName__.
                                                            ?__resourceIri__ rs:PX_has_media_type ?__mediaType__.
                                                        } WHERE {}'
                                        generate-iri-query='SELECT ?resourceIri {
                                                                BIND(IRI(CONCAT(STR(Default:), "EX_File/", ?__fileName__)) AS ?resourceIri) .
                                                            }'
            >
            <div className='placeholder-item'>
                <rs-icon icon-type='round' icon-name='file_upload' class='upload_icon'></rs-icon>
                <p>Drag image or click to upload</p>
                <div>Supported format: .jpeg .jpg .tiff .bmp .png .svg+xml</div>
            </div>
            </semantic-form-file-input>
        </div>

        [[> rsp:FormEntityRecord]]
    </div>

    [[> rsp:FormDefaultActions actionType='Upload' formEntity='image' assetForm=true assetStorage='tmp']]

  
</semantic-form>